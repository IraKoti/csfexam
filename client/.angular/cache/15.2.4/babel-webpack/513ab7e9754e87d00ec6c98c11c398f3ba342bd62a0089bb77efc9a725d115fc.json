{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/irawan/src/csfexam/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/nycservice\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function (a1) {\n  return [\"/comment\", a1];\n};\nfunction ReviewComponent_tr_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"img\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 4);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelement(10, \"br\");\n    i0.ɵɵelementStart(11, \"button\", 5);\n    i0.ɵɵtext(12, \"Comment\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const r_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", r_r1.link, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(r_r1.display_title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", r_r1.mpaa_rating, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", r_r1.summary_short, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, r_r1.display_title));\n  }\n}\nexport class ReviewComponent {\n  constructor(nycMovieSvc, actRoute, router) {\n    this.nycMovieSvc = nycMovieSvc;\n    this.actRoute = actRoute;\n    this.router = router;\n    this.movieName = \"\";\n  }\n  ngOnInit() {\n    var _this = this;\n    this.params$ = this.actRoute.params.subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (params) {\n        _this.movieName = params['movieName'];\n        //console.log(this.movieName);\n        const r = yield _this.nycMovieSvc.searchMovie(_this.movieName);\n        console.log(r);\n        if (r === undefined || r.length == 0) {\n          _this.router.navigate(['/review', \"movieNotFound\"]);\n        } else {\n          _this.reviews = r;\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    //console.log(this.reviews);\n  }\n\n  back() {\n    this.router.navigate(['/']);\n  }\n  goComment(movName) {\n    //const queryParams: Params = { charParam: this.movieName+ '|' + movName };\n    //this.router.navigate(['/comment'], {queryParams : queryParams})\n  }\n}\nReviewComponent.ɵfac = function ReviewComponent_Factory(t) {\n  return new (t || ReviewComponent)(i0.ɵɵdirectiveInject(i1.NycMovieService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\nReviewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReviewComponent,\n  selectors: [[\"app-review\"]],\n  decls: 8,\n  vars: 1,\n  consts: [[\"width\", \"100px\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"src\", \"/assets/placeholder.jpg\"], [\"target\", \"_blank\", 3, \"href\"], [3, \"routerLink\"]],\n  template: function ReviewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\")(1, \"tr\")(2, \"td\", 0);\n      i0.ɵɵtext(3, \"Search Result\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"td\")(5, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function ReviewComponent_Template_button_click_5_listener() {\n        return ctx.back();\n      });\n      i0.ɵɵtext(6, \"Back\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(7, ReviewComponent_tr_7_Template, 13, 7, \"tr\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.reviews);\n    }\n  },\n  dependencies: [i3.NgForOf, i2.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAKIA,0BAA8B;IACtBA,yBAAmC;IAAAA,iBAAK;IAC5CA,0BAAI;IAAqCA,YAAmB;IAAAA,iBAAI;IAAAA,qBAAI;IAChEA,YAAiB;IAAAA,qBAAI;IACrBA,YAAmB;IAAAA,sBAAI;IACvBA,kCAAqD;IAAAA,wBAAO;IAAAA,iBAAS;;;;IAHlEA,eAAiB;IAAjBA,6DAAiB;IAAiBA,eAAmB;IAAnBA,wCAAmB;IACxDA,eAAiB;IAAjBA,gDAAiB;IACjBA,eAAmB;IAAnBA,kDAAmB;IACXA,eAA4C;IAA5CA,2EAA4C;;;ACChE,OAAM,MAAOC,eAAe;EAO1BC,YAAqBC,WAA4B,EAAUC,QAAwB,EACzEC,MAAc;IADH,gBAAW,GAAXF,WAAW;IAA2B,aAAQ,GAARC,QAAQ;IACzD,WAAM,GAANC,MAAM;IAPhB,cAAS,GAAC,EAAE;EAOe;EAE3BC,QAAQ;IAAA;IACN,IAAI,CAACC,OAAO,GAAG,IAAI,CAACH,QAAQ,CAACI,MAAM,CAACC,SAAS;MAAA,6BAC3C,WAAOD,MAAM,EAAI;QACf,KAAI,CAACE,SAAS,GAAGF,MAAM,CAAC,WAAW,CAAC;QACpC;QACA,MAAMG,CAAC,SAAS,KAAI,CAACR,WAAW,CAACS,WAAW,CAAC,KAAI,CAACF,SAAS,CAAC;QAC5DG,OAAO,CAACC,GAAG,CAACH,CAAC,CAAC;QACd,IAAGA,CAAC,KAAKI,SAAS,IAAIJ,CAAC,CAACK,MAAM,IAAI,CAAC,EACnC;UACE,KAAI,CAACX,MAAM,CAACY,QAAQ,CAAC,CAAC,SAAS,EAAC,eAAe,CAAC,CAAC;SAClD,MAED;UACE,KAAI,CAACC,OAAO,GAAGP,CAAC;;MAGpB,CAAC;MAAA;QAAA;MAAA;IAAA,IACF;IACD;EACF;;EAEAQ,IAAI;IAEF,IAAI,CAACd,MAAM,CAACY,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;EAC7B;EAEAG,SAAS,CAACC,OAAc;IAEtB;IACA;EAAA;;AAvCSpB,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAAqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDX5B1B,6BAAO;MAEmBA,6BAAa;MAAAA,iBAAK;MACpCA,0BAAI;MAAQA;QAAA,OAAS2B,UAAM;MAAA,EAAC;MAAC3B,oBAAI;MAAAA,iBAAS;MAE9CA,+DAOK;MACTA,iBAAQ;;;MARcA,eAAU;MAAVA,qCAAU","names":["i0","ReviewComponent","constructor","nycMovieSvc","actRoute","router","ngOnInit","params$","params","subscribe","movieName","r","searchMovie","console","log","undefined","length","navigate","reviews","back","goComment","movName","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\irawan\\src\\csfexam\\client\\src\\app\\components\\review.component.html","C:\\Users\\irawan\\src\\csfexam\\client\\src\\app\\components\\review.component.ts"],"sourcesContent":["<table>\n    <tr>\n        <td width=\"100px\">Search Result</td>\n        <td><button (click)=\"back()\">Back</button></td>\n    </tr>\n    <tr *ngFor=\"let r of reviews\">\n        <td><img src=\"/assets/placeholder.jpg\"></td>\n        <td><a href=\"{{r.link}}\" target=\"_blank\">{{r.display_title}}</a><br>\n            {{r.mpaa_rating}}<br>\n            {{r.summary_short}}<br>\n            <button [routerLink]=\"['/comment', r.display_title]\">Comment</button>\n        </td>\n    </tr>\n</table>\n\n\n","import { Component, OnInit, OnDestroy} from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { Review } from '../models/review';\nimport { NycMovieService } from '../services/nycservice';\n\n@Component({\n  selector: 'app-review',\n  templateUrl: './review.component.html',\n  styleUrls: ['./review.component.css']\n})\nexport class ReviewComponent implements OnInit {\n  movieName=\"\";\n  params$ !: Subscription;\n  reviews !: Review[];\n  \n  \n\n  constructor( private nycMovieSvc: NycMovieService, private actRoute: ActivatedRoute,\n    private router: Router) {}\n\n  ngOnInit(): void {\n    this.params$ = this.actRoute.params.subscribe(\n      async (params) => {\n        this.movieName = params['movieName'];\n        //console.log(this.movieName);\n        const r = await this.nycMovieSvc.searchMovie(this.movieName);\n        console.log(r);\n        if(r === undefined || r.length == 0)\n        {\n          this.router.navigate(['/review',\"movieNotFound\"]);\n        }\n        else\n        {\n          this.reviews = r;\n        }\n        \n      }\n    )\n    //console.log(this.reviews);\n  }\n\n  back()\n  {\n    this.router.navigate(['/']);\n  }\n\n  goComment(movName:string)\n  {\n    //const queryParams: Params = { charParam: this.movieName+ '|' + movName };\n    //this.router.navigate(['/comment'], {queryParams : queryParams})\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}